!function(e){"use strict";function s(){a(),n(),o(),d(),c()}function t(){}function r(){}function i(){}function a(){var s=e(".mkd-login-opener"),t=e(".mkd-login-register-holder");if(s){var r=e(".mkd-login-register-content");s.click(function(e){e.preventDefault(),t.fadeIn(300),t.addClass("opened")}),t.click(function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),e(".mkd-login-register-content").click(function(e){e.stopPropagation()}),e(window).on("keyup",function(e){t.hasClass("opened")&&27==e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),r.tabs()}}function n(){e(".mkd-login-form").on("submit",function(s){s.preventDefault();var t={action:"mkd_membership_login_user",security:e(this).find("#mkd-login-security").val(),login_data:e(this).serialize()};return e.ajax({type:"POST",data:t,url:MikadoAjaxUrl,success:function(e){var s;s=JSON.parse(e),u(s),"success"==s.status&&(window.location=s.redirect)}}),!1})}function o(){e(".mkd-register-form").on("submit",function(s){s.preventDefault();var t={action:"mkd_membership_register_user",security:e(this).find("#mkd-register-security").val(),register_data:e(this).serialize()};return e.ajax({type:"POST",data:t,url:MikadoAjaxUrl,success:function(e){var s;s=JSON.parse(e),u(s),"success"==s.status&&(window.location=s.redirect)}}),!1})}function d(){var s=e(".mkd-reset-pass-form");s.submit(function(t){t.preventDefault();var r={action:"mkd_membership_user_lost_password",user_login:s.find("#user_reset_password_login").val()};e.ajax({type:"POST",data:r,url:MikadoAjaxUrl,success:function(e){var s=JSON.parse(e);u(s),"success"==s.status&&(window.location=s.redirect)}})})}function u(s){var t,r=e(".mkd-membership-response-holder"),i=_.template(e(".mkd-membership-response-template").html());t="success"===s.status?"mkd-membership-message-succes":"mkd-membership-message-error";var a={messageClass:t,message:s.message},n=i(a);r.html(n)}function c(){var s=e("#mkd-membership-update-profile-form");if(s.length){var t=s.find("button"),r=t.data("updating-text"),i=t.data("updated-text");s.on("submit",function(s){s.preventDefault();var a=t.html();t.html(r);var n={action:"mkd_membership_update_user_profile",data:e(this).serialize()};return e.ajax({type:"POST",data:n,url:MikadoAjaxUrl,success:function(e){var s;s=JSON.parse(e),u(s),"success"==s.status?(t.html(i),window.location=s.redirect):t.html(a)}}),!1})}}var m={};"undefined"!=typeof mkd&&(mkd.modules.socialLogin=m),m.mkdUserLogin=n,m.mkdUserRegister=o,m.mkdUserLostPassword=d,m.mkdInitLoginWidgetModal=a,m.mkdUpdateUserProfile=c,e(document).ready(s),e(window).load(t),e(window).resize(r),e(window).scroll(i)}(jQuery);